Explained root cause and recommended fixes: (1) make your middleware async-compatible or wrap sync parts with sync_to_async so it returns awaitables under ASGI; (2) or patch Django's middleware loop to avoid assigning handler = adapt_method_mode(...) when a middleware raises MiddlewareNotUsed (so the middleware chain isn't "poisoned"). Also suggested adding a test reproducing the MiddlewareNotUsed path to prevent regressions.

No changes detected to generate a patch.