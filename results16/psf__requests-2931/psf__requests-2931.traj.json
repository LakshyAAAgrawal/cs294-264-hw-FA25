{
  "info": {
    "submission": "diff --git a/requests/utils.py b/requests/utils.py\nindex 132cd2b..96afe79 100644\n--- a/requests/utils.py\n+++ b/requests/utils.py\n@@ -654,8 +654,6 @@ def guess_json_utf(data):\n             return 'utf-32-le'\n         # Did not detect a valid UTF-32 ascii-range character\n     return None\n-\n-\n def prepend_scheme_if_needed(url, new_scheme):\n     '''Given a URL that may or may not have a scheme, prepend the given scheme.\n     Does not replace a present scheme with the one provided as an argument.'''\n@@ -668,21 +666,15 @@ def prepend_scheme_if_needed(url, new_scheme):\n         netloc, path = path, netloc\n \n     return urlunparse((scheme, netloc, path, params, query, fragment))\n-\n-\n def get_auth_from_url(url):\n     \"\"\"Given a url with authentication components, extract them into a tuple of\n     username,password.\"\"\"\n     parsed = urlparse(url)\n-\n     try:\n         auth = (unquote(parsed.username), unquote(parsed.password))\n     except (AttributeError, TypeError):\n         auth = ('', '')\n-\n     return auth\n-\n-\n def to_native_string(string, encoding='ascii'):\n     \"\"\"\n     Given a string object, regardless of type, returns a representation of that\n@@ -694,6 +686,18 @@ def to_native_string(string, encoding='ascii'):\n     if isinstance(string, builtin_str):\n         out = string\n     else:\n+        if is_py2:\n+            out = string.encode(encoding)\n+        else:\n+            # On Python 3, leave bytes unchanged (they may be binary payloads).\n+            # Decoding arbitrary binary data with the wrong encoding raises\n+            # UnicodeDecodeError, which breaks binary uploads (see issue #2930).\n+            if isinstance(string, bytes):\n+                out = string\n+            else:\n+                out = string.decode(encoding)\n+\n+    return out\n         if is_py2:\n             out = string.encode(encoding)\n         else:",
    "config": {
      "agent": "swe-agent",
      "model": "gpt-5-mini"
    }
  },
  "messages": [],
  "trajectory_format": "mini-swe-agent-1",
  "instance_id": "psf__requests-2931"
}